const Ze=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}};Ze();const D={};function ze(e){D.context=e}const et=(e,n)=>e===n,he={equals:et};let Ie=qe;const z={},K=1,pe=2,Me={owned:null,cleanups:null,context:null,owner:null};var B=null;let ce=null,b=null,le=null,L=null,G=null,Ne=0;function tt(e,n){const t=b,r=B,o=e.length===0?Me:{owned:null,cleanups:null,context:null,owner:n||r};B=o,b=null;try{return Ae(()=>e(()=>Te(o)),!0)}finally{b=t,B=r}}function X(e,n){n=n?Object.assign({},he,n):he;const t={value:e,observers:null,observerSlots:null,pending:z,comparator:n.equals||void 0},r=o=>(typeof o=="function"&&(o=o(t.pending!==z?t.pending:t.value)),Ce(t,o));return[We.bind(t),r]}function W(e,n,t){const r=Fe(e,n,!1,K);ue(r)}function nt(e,n,t){Ie=lt;const r=Fe(e,n,!1,K);r.user=!0,G?G.push(r):ue(r)}function je(e,n,t){t=t?Object.assign({},he,t):he;const r=Fe(e,n,!0,0);return r.pending=z,r.observers=null,r.observerSlots=null,r.comparator=t.equals||void 0,ue(r),We.bind(r)}function rt(e){if(le)return e();let n;const t=le=[];try{n=e()}finally{le=null}return Ae(()=>{for(let r=0;r<t.length;r+=1){const o=t[r];if(o.pending!==z){const i=o.pending;o.pending=z,Ce(o,i)}}},!1),n}function ve(e){let n,t=b;return b=null,n=e(),b=t,n}function ot(e){nt(()=>ve(e))}function We(){const e=ce;if(this.sources&&(this.state||e)){const n=L;L=null,this.state===K||e?ue(this):ge(this),L=n}if(b){const n=this.observers?this.observers.length:0;b.sources?(b.sources.push(this),b.sourceSlots.push(n)):(b.sources=[this],b.sourceSlots=[n]),this.observers?(this.observers.push(b),this.observerSlots.push(b.sources.length-1)):(this.observers=[b],this.observerSlots=[b.sources.length-1])}return this.value}function Ce(e,n,t){if(le)return e.pending===z&&le.push(e),e.pending=n,n;if(e.comparator&&e.comparator(e.value,n))return n;let r=!1;return e.value=n,e.observers&&e.observers.length&&Ae(()=>{for(let o=0;o<e.observers.length;o+=1){const i=e.observers[o];r&&ce.disposed.has(i),(r&&!i.tState||!r&&!i.state)&&(i.pure?L.push(i):G.push(i),i.observers&&Ve(i)),r||(i.state=K)}if(L.length>1e6)throw L=[],new Error},!1),n}function ue(e){if(!e.fn)return;Te(e);const n=B,t=b,r=Ne;b=B=e,it(e,e.value,r),b=t,B=n}function it(e,n,t){let r;try{r=e.fn(n)}catch(o){Ye(o)}(!e.updatedAt||e.updatedAt<=t)&&(e.observers&&e.observers.length?Ce(e,r):e.value=r,e.updatedAt=t)}function Fe(e,n,t,r=K,o){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:B,context:null,pure:t};return B===null||B!==Me&&(B.owned?B.owned.push(i):B.owned=[i]),i}function ae(e){const n=ce;if(e.state===0||n)return;if(e.state===pe||n)return ge(e);if(e.suspense&&ve(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ne);)(e.state||n)&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===K||n)ue(e);else if(e.state===pe||n){const o=L;L=null,ge(e,t[0]),L=o}}function Ae(e,n){if(L)return e();let t=!1;n||(L=[]),G?t=!0:G=[],Ne++;try{const r=e();return st(t),r}catch(r){Ye(r)}finally{L=null,t||(G=null)}}function st(e){L&&(qe(L),L=null),!e&&(G.length?rt(()=>{Ie(G),G=null}):G=null)}function qe(e){for(let n=0;n<e.length;n++)ae(e[n])}function lt(e){let n,t=0;for(n=0;n<e.length;n++){const o=e[n];o.user?e[t++]=o:ae(o)}D.context&&ze();const r=e.length;for(n=0;n<t;n++)ae(e[n]);for(n=r;n<e.length;n++)ae(e[n])}function ge(e,n){const t=ce;e.state=0;for(let r=0;r<e.sources.length;r+=1){const o=e.sources[r];o.sources&&(o.state===K||t?o!==n&&ae(o):(o.state===pe||t)&&ge(o,n))}}function Ve(e){const n=ce;for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];(!r.state||n)&&(r.state=pe,r.pure?L.push(r):G.push(r),r.observers&&Ve(r))}}function Te(e){let n;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),r=e.sourceSlots.pop(),o=t.observers;if(o&&o.length){const i=o.pop(),a=t.observerSlots.pop();r<o.length&&(i.sourceSlots[a]=r,o[r]=i,t.observerSlots[r]=a)}}if(e.owned){for(n=0;n<e.owned.length;n++)Te(e.owned[n]);e.owned=null}if(e.cleanups){for(n=0;n<e.cleanups.length;n++)e.cleanups[n]();e.cleanups=null}e.state=0,e.context=null}function Ye(e){throw e}function se(e,n){return ve(()=>e(n||{}))}function be(e){let n=!1;const t=je(()=>e.when,void 0,{equals:(r,o)=>n?r===o:!r==!o});return je(()=>{const r=t();if(r){const o=e.children;return(n=typeof o=="function"&&o.length>0)?ve(()=>o(r)):o}return e.fallback})}function at(e,n,t){let r=t.length,o=n.length,i=r,a=0,f=0,v=n[o-1].nextSibling,$=null;for(;a<o||f<i;){if(n[a]===t[f]){a++,f++;continue}for(;n[o-1]===t[i-1];)o--,i--;if(o===a){const g=i<r?f?t[f-1].nextSibling:t[i-f]:v;for(;f<i;)e.insertBefore(t[f++],g)}else if(i===f)for(;a<o;)(!$||!$.has(n[a]))&&n[a].remove(),a++;else if(n[a]===t[i-1]&&t[f]===n[o-1]){const g=n[--o].nextSibling;e.insertBefore(t[f++],n[a++].nextSibling),e.insertBefore(t[--i],g),n[o]=t[i]}else{if(!$){$=new Map;let N=f;for(;N<i;)$.set(t[N],N++)}const g=$.get(n[a]);if(g!=null)if(f<g&&g<i){let N=a,F=1,I;for(;++N<o&&N<i&&!((I=$.get(n[N]))==null||I!==g+F);)F++;if(F>g-f){const Y=n[a];for(;f<g;)e.insertBefore(t[f++],Y)}else e.replaceChild(t[f++],n[a++])}else a++;else n[a++].remove()}}}const ke="_$DX_DELEGATE";function ft(e,n,t){let r;return tt(o=>{r=o,n===document?e():q(n,e(),n.firstChild?null:void 0,t)}),()=>{r(),n.textContent=""}}function V(e,n,t){const r=document.createElement("template");r.innerHTML=e;let o=r.content.firstChild;return t&&(o=o.firstChild),o}function ct(e,n=window.document){const t=n[ke]||(n[ke]=new Set);for(let r=0,o=e.length;r<o;r++){const i=e[r];t.has(i)||(t.add(i),n.addEventListener(i,ut))}}function de(e,n,t){t==null?e.removeAttribute(n):e.setAttribute(n,t)}function q(e,n,t,r){if(t!==void 0&&!r&&(r=[]),typeof n!="function")return me(e,n,r,t);W(o=>me(e,n(),o,t),r)}function ut(e){const n=`$$${e.type}`;let t=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==t&&Object.defineProperty(e,"target",{configurable:!0,value:t}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),D.registry&&!D.done&&(D.done=!0,document.querySelectorAll("[id^=pl-]").forEach(r=>r.remove()));t!==null;){const r=t[n];if(r&&!t.disabled){const o=t[`${n}Data`];if(o!==void 0?r(o,e):r(e),e.cancelBubble)return}t=t.host&&t.host!==t&&t.host instanceof Node?t.host:t.parentNode}}function me(e,n,t,r,o){for(D.context&&!t&&(t=[...e.childNodes]);typeof t=="function";)t=t();if(n===t)return t;const i=typeof n,a=r!==void 0;if(e=a&&t[0]&&t[0].parentNode||e,i==="string"||i==="number"){if(D.context)return t;if(i==="number"&&(n=n.toString()),a){let f=t[0];f&&f.nodeType===3?f.data=n:f=document.createTextNode(n),t=Z(e,t,r,f)}else t!==""&&typeof t=="string"?t=e.firstChild.data=n:t=e.textContent=n}else if(n==null||i==="boolean"){if(D.context)return t;t=Z(e,t,r)}else{if(i==="function")return W(()=>{let f=n();for(;typeof f=="function";)f=f();t=me(e,f,t,r)}),()=>t;if(Array.isArray(n)){const f=[];if(Le(f,n,o))return W(()=>t=me(e,f,t,r,!0)),()=>t;if(D.context){for(let v=0;v<f.length;v++)if(f[v].parentNode)return t=f}if(f.length===0){if(t=Z(e,t,r),a)return t}else Array.isArray(t)?t.length===0?Be(e,f,r):at(e,t,f):(t&&Z(e),Be(e,f));t=f}else if(n instanceof Node){if(D.context&&n.parentNode)return t=a?[n]:n;if(Array.isArray(t)){if(a)return t=Z(e,t,r,n);Z(e,t,null,n)}else t==null||t===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);t=n}}return t}function Le(e,n,t){let r=!1;for(let o=0,i=n.length;o<i;o++){let a=n[o],f;if(a instanceof Node)e.push(a);else if(!(a==null||a===!0||a===!1))if(Array.isArray(a))r=Le(e,a)||r;else if((f=typeof a)=="string")e.push(document.createTextNode(a));else if(f==="function")if(t){for(;typeof a=="function";)a=a();r=Le(e,Array.isArray(a)?a:[a])||r}else e.push(a),r=!0;else e.push(document.createTextNode(a.toString()))}return r}function Be(e,n,t){for(let r=0,o=n.length;r<o;r++)e.insertBefore(n[r],t)}function Z(e,n,t,r){if(t===void 0)return e.textContent="";const o=r||document.createTextNode("");if(n.length){let i=!1;for(let a=n.length-1;a>=0;a--){const f=n[a];if(o!==f){const v=f.parentNode===e;!i&&!a?v?e.replaceChild(o,f):e.insertBefore(o,t):v&&f.remove()}else i=!0}}else e.insertBefore(o,t);return[o]}const dt="_NavBar_1w2qb_1",ht="_NavBarList_1w2qb_9",pt="_NavBarListItem_1w2qb_14";var $e={NavBar:dt,NavBarList:ht,NavBarListItem:pt};const gt=V('<nav><span class="material-icons">home</span><ul><li>video-trim</li></ul></nav>'),mt=()=>(()=>{const e=gt.cloneNode(!0),n=e.firstChild,t=n.nextSibling,r=t.firstChild;return W(o=>{const i=$e.NavBar,a=$e.NavBarList,f=$e.NavBarListItem;return i!==o._v$&&(e.className=o._v$=i),a!==o._v$2&&(t.className=o._v$2=a),f!==o._v$3&&(r.className=o._v$3=f),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),e})(),vt="_AppContent_1hdhl_1",wt="_container_1hdhl_5",yt="_containerChild_1hdhl_8";var re={AppContent:vt,container:wt,containerChild:yt},bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$t={exports:{}};(function(e){var n=function(t){var r=Object.prototype,o=r.hasOwnProperty,i,a=typeof Symbol=="function"?Symbol:{},f=a.iterator||"@@iterator",v=a.asyncIterator||"@@asyncIterator",$=a.toStringTag||"@@toStringTag";function g(l,s,c){return Object.defineProperty(l,s,{value:c,enumerable:!0,configurable:!0,writable:!0}),l[s]}try{g({},"")}catch{g=function(s,c,d){return s[c]=d}}function N(l,s,c,d){var u=s&&s.prototype instanceof _?s:_,w=Object.create(u.prototype),T=new M(d||[]);return w._invoke=te(l,c,T),w}t.wrap=N;function F(l,s,c){try{return{type:"normal",arg:l.call(s,c)}}catch(d){return{type:"throw",arg:d}}}var I="suspendedStart",Y="suspendedYield",U="executing",P="completed",E={};function _(){}function h(){}function m(){}var y={};g(y,f,function(){return this});var j=Object.getPrototypeOf,S=j&&j(j(we([])));S&&S!==r&&o.call(S,f)&&(y=S);var R=m.prototype=_.prototype=Object.create(y);h.prototype=m,g(R,"constructor",m),g(m,"constructor",h),h.displayName=g(m,$,"GeneratorFunction");function ee(l){["next","throw","return"].forEach(function(s){g(l,s,function(c){return this._invoke(s,c)})})}t.isGeneratorFunction=function(l){var s=typeof l=="function"&&l.constructor;return s?s===h||(s.displayName||s.name)==="GeneratorFunction":!1},t.mark=function(l){return Object.setPrototypeOf?Object.setPrototypeOf(l,m):(l.__proto__=m,g(l,$,"GeneratorFunction")),l.prototype=Object.create(R),l},t.awrap=function(l){return{__await:l}};function Q(l,s){function c(w,T,x,k){var O=F(l[w],l,T);if(O.type==="throw")k(O.arg);else{var ye=O.arg,ne=ye.value;return ne&&typeof ne=="object"&&o.call(ne,"__await")?s.resolve(ne.__await).then(function(H){c("next",H,x,k)},function(H){c("throw",H,x,k)}):s.resolve(ne).then(function(H){ye.value=H,x(ye)},function(H){return c("throw",H,x,k)})}}var d;function u(w,T){function x(){return new s(function(k,O){c(w,T,k,O)})}return d=d?d.then(x,x):x()}this._invoke=u}ee(Q.prototype),g(Q.prototype,v,function(){return this}),t.AsyncIterator=Q,t.async=function(l,s,c,d,u){u===void 0&&(u=Promise);var w=new Q(N(l,s,c,d),u);return t.isGeneratorFunction(s)?w:w.next().then(function(T){return T.done?T.value:w.next()})};function te(l,s,c){var d=I;return function(w,T){if(d===U)throw new Error("Generator is already running");if(d===P){if(w==="throw")throw T;return Pe()}for(c.method=w,c.arg=T;;){var x=c.delegate;if(x){var k=p(x,c);if(k){if(k===E)continue;return k}}if(c.method==="next")c.sent=c._sent=c.arg;else if(c.method==="throw"){if(d===I)throw d=P,c.arg;c.dispatchException(c.arg)}else c.method==="return"&&c.abrupt("return",c.arg);d=U;var O=F(l,s,c);if(O.type==="normal"){if(d=c.done?P:Y,O.arg===E)continue;return{value:O.arg,done:c.done}}else O.type==="throw"&&(d=P,c.method="throw",c.arg=O.arg)}}}function p(l,s){var c=l.iterator[s.method];if(c===i){if(s.delegate=null,s.method==="throw"){if(l.iterator.return&&(s.method="return",s.arg=i,p(l,s),s.method==="throw"))return E;s.method="throw",s.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var d=F(c,l.iterator,s.arg);if(d.type==="throw")return s.method="throw",s.arg=d.arg,s.delegate=null,E;var u=d.arg;if(!u)return s.method="throw",s.arg=new TypeError("iterator result is not an object"),s.delegate=null,E;if(u.done)s[l.resultName]=u.value,s.next=l.nextLoc,s.method!=="return"&&(s.method="next",s.arg=i);else return u;return s.delegate=null,E}ee(R),g(R,$,"Generator"),g(R,f,function(){return this}),g(R,"toString",function(){return"[object Generator]"});function C(l){var s={tryLoc:l[0]};1 in l&&(s.catchLoc=l[1]),2 in l&&(s.finallyLoc=l[2],s.afterLoc=l[3]),this.tryEntries.push(s)}function A(l){var s=l.completion||{};s.type="normal",delete s.arg,l.completion=s}function M(l){this.tryEntries=[{tryLoc:"root"}],l.forEach(C,this),this.reset(!0)}t.keys=function(l){var s=[];for(var c in l)s.push(c);return s.reverse(),function d(){for(;s.length;){var u=s.pop();if(u in l)return d.value=u,d.done=!1,d}return d.done=!0,d}};function we(l){if(l){var s=l[f];if(s)return s.call(l);if(typeof l.next=="function")return l;if(!isNaN(l.length)){var c=-1,d=function u(){for(;++c<l.length;)if(o.call(l,c))return u.value=l[c],u.done=!1,u;return u.value=i,u.done=!0,u};return d.next=d}}return{next:Pe}}t.values=we;function Pe(){return{value:i,done:!0}}return M.prototype={constructor:M,reset:function(l){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(A),!l)for(var s in this)s.charAt(0)==="t"&&o.call(this,s)&&!isNaN(+s.slice(1))&&(this[s]=i)},stop:function(){this.done=!0;var l=this.tryEntries[0],s=l.completion;if(s.type==="throw")throw s.arg;return this.rval},dispatchException:function(l){if(this.done)throw l;var s=this;function c(k,O){return w.type="throw",w.arg=l,s.next=k,O&&(s.method="next",s.arg=i),!!O}for(var d=this.tryEntries.length-1;d>=0;--d){var u=this.tryEntries[d],w=u.completion;if(u.tryLoc==="root")return c("end");if(u.tryLoc<=this.prev){var T=o.call(u,"catchLoc"),x=o.call(u,"finallyLoc");if(T&&x){if(this.prev<u.catchLoc)return c(u.catchLoc,!0);if(this.prev<u.finallyLoc)return c(u.finallyLoc)}else if(T){if(this.prev<u.catchLoc)return c(u.catchLoc,!0)}else if(x){if(this.prev<u.finallyLoc)return c(u.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(l,s){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&o.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var u=d;break}}u&&(l==="break"||l==="continue")&&u.tryLoc<=s&&s<=u.finallyLoc&&(u=null);var w=u?u.completion:{};return w.type=l,w.arg=s,u?(this.method="next",this.next=u.finallyLoc,E):this.complete(w)},complete:function(l,s){if(l.type==="throw")throw l.arg;return l.type==="break"||l.type==="continue"?this.next=l.arg:l.type==="return"?(this.rval=this.arg=l.arg,this.method="return",this.next="end"):l.type==="normal"&&s&&(this.next=s),E},finish:function(l){for(var s=this.tryEntries.length-1;s>=0;--s){var c=this.tryEntries[s];if(c.finallyLoc===l)return this.complete(c.completion,c.afterLoc),A(c),E}},catch:function(l){for(var s=this.tryEntries.length-1;s>=0;--s){var c=this.tryEntries[s];if(c.tryLoc===l){var d=c.completion;if(d.type==="throw"){var u=d.arg;A(c)}return u}}throw new Error("illegal catch attempt")},delegateYield:function(l,s,c){return this.delegate={iterator:we(l),resultName:s,nextLoc:c},this.method==="next"&&(this.arg=i),E}},t}(e.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})($t);var _t={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}};let xe=!1,He=()=>{};const Et=e=>{xe=e},St=e=>{He=e},Lt=(e,n)=>{He({type:e,message:n}),xe&&console.log(`[${e}] ${n}`)};var Je={logging:xe,setLogging:Et,setCustomLogger:St,log:Lt};let oe=0,_e=0;const Ue=e=>{const[n,t,r]=e.split(":");return parseFloat(n)*60*60+parseFloat(t)*60+parseFloat(r)};var Nt=(e,n)=>{if(typeof e=="string")if(e.startsWith("  Duration")){const t=e.split(", ")[0].split(": ")[1],r=Ue(t);n({duration:r,ratio:_e}),(oe===0||oe>r)&&(oe=r)}else if(e.startsWith("frame")||e.startsWith("size")){const t=e.split("time=")[1].split(" ")[0],r=Ue(t);_e=r/oe,n({ratio:_e,time:r})}else e.startsWith("video:")&&(n({ratio:1}),oe=0)},Ct=(e,n)=>{const t=e._malloc(n.length*Uint32Array.BYTES_PER_ELEMENT);return n.forEach((r,o)=>{const i=e._malloc(r.length+1);e.writeAsciiToMemory(r,i),e.setValue(t+Uint32Array.BYTES_PER_ELEMENT*o,i,"i32")}),[n.length,t]},Oe={exports:{}};(function(e,n){(function(t,r){e.exports=r()})(bt,function(){function t(){var r=arguments.length;if(r===0)throw new Error("resolveUrl requires at least one argument; got none.");var o=document.createElement("base");if(o.href=arguments[0],r===1)return o.href;var i=document.getElementsByTagName("head")[0];i.insertBefore(o,i.firstChild);for(var a=document.createElement("a"),f,v=1;v<r;v++)a.href=arguments[v],f=a.href,o.href=f;return i.removeChild(o),f}return t})})(Oe);const Ft="@ffmpeg/ffmpeg",At="0.10.1",Tt="FFmpeg WebAssembly version",xt="src/index.js",Ot="src/index.d.ts",Pt={example:"examples"},jt={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js",prepublishOnly:"npm run build",lint:"eslint src",wait:"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},kt={"./src/node/index.js":"./src/browser/index.js"},Bt={type:"git",url:"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},Ut=["ffmpeg","WebAssembly","video"],Rt="Jerome Wu <jeromewus@gmail.com>",Gt="MIT",Dt={url:"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},It={node:">=12.16.1"},Mt="https://github.com/ffmpegwasm/ffmpeg.wasm#readme",Wt={"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},qt={"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0",chai:"^4.2.0",cors:"^2.8.5",eslint:"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1",express:"^4.17.1",mocha:"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0",webpack:"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"};var Ke={name:Ft,version:At,description:Tt,main:xt,types:Ot,directories:Pt,scripts:jt,browser:kt,repository:Bt,keywords:Ut,author:Rt,license:Gt,bugs:Dt,engines:It,homepage:Mt,dependencies:Wt,devDependencies:qt};const{devDependencies:Vt}=Ke;var Yt={corePath:`https://unpkg.com/@ffmpeg/core@${Vt["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`};const Ht=Oe.exports,{log:fe}=Je,Ee=async(e,n)=>{fe("info",`fetch ${e}`);const t=await(await fetch(e)).arrayBuffer();fe("info",`${e} file size = ${t.byteLength} bytes`);const r=new Blob([t],{type:n}),o=URL.createObjectURL(r);return fe("info",`${e} blob URL = ${o}`),o};var Jt=async({corePath:e})=>{if(typeof e!="string")throw Error("corePath should be a string!");const n=Ht(e),t=await Ee(n,"application/javascript"),r=await Ee(n.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),o=await Ee(n.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(i=>{const a=document.createElement("script"),f=()=>{a.removeEventListener("load",f),fe("info","ffmpeg-core.js script loaded"),i({createFFmpegCore,corePath:t,wasmPath:r,workerPath:o})};a.src=t,a.type="text/javascript",a.addEventListener("load",f),document.getElementsByTagName("head")[0].appendChild(a)}):(fe("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:t,wasmPath:r,workerPath:o}))};const Kt=Oe.exports,Qt=e=>new Promise((n,t)=>{const r=new FileReader;r.onload=()=>{n(r.result)},r.onerror=({target:{error:{code:o}}})=>{t(Error(`File could not be read! Code=${o}`))},r.readAsArrayBuffer(e)});var Xt=async e=>{let n=e;return typeof e>"u"?new Uint8Array:(typeof e=="string"?/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?n=atob(e.split(",")[1]).split("").map(t=>t.charCodeAt(0)):n=await(await fetch(Kt(e))).arrayBuffer():(e instanceof File||e instanceof Blob)&&(n=await Qt(e)),new Uint8Array(n))};const Zt=Yt,zt=Jt,en=Xt;var Qe={defaultOptions:Zt,getCreateFFmpegCore:zt,fetchFile:en};const{defaultArgs:tn,baseOptions:nn}=_t,{setLogging:Re,setCustomLogger:Ge,log:J}=Je,rn=Nt,on=Ct,{defaultOptions:sn,getCreateFFmpegCore:ln}=Qe,{version:an}=Ke,Se=Error("ffmpeg.wasm is not ready, make sure you have completed load().");var fn=(e={})=>{const{log:n,logger:t,progress:r,...o}={...nn,...sn,...e};let i=null,a=null,f=null,v=!1,$=r;const g=h=>{h==="FFMPEG_END"&&f!==null&&(f(),f=null,v=!1)},N=({type:h,message:m})=>{J(h,m),rn(m,$),g(m)},F=async()=>{if(J("info","load ffmpeg-core"),i===null){J("info","loading ffmpeg-core");const{createFFmpegCore:h,corePath:m,workerPath:y,wasmPath:j}=await ln(o);i=await h({mainScriptUrlOrBlob:m,printErr:S=>N({type:"fferr",message:S}),print:S=>N({type:"ffout",message:S}),locateFile:(S,R)=>{if(typeof window<"u"){if(typeof j<"u"&&S.endsWith("ffmpeg-core.wasm"))return j;if(typeof y<"u"&&S.endsWith("ffmpeg-core.worker.js"))return y}return R+S}}),a=i.cwrap("proxy_main","number",["number","number"]),J("info","ffmpeg-core loaded")}else throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.")},I=()=>i!==null,Y=(...h)=>{if(J("info",`run ffmpeg command: ${h.join(" ")}`),i===null)throw Se;if(v)throw Error("ffmpeg.wasm can only run one command at a time");return v=!0,new Promise(m=>{const y=[...tn,...h].filter(j=>j.length!==0);f=m,a(...on(i,y))})},U=(h,...m)=>{if(J("info",`run FS.${h} ${m.map(y=>typeof y=="string"?y:`<${y.length} bytes binary file>`).join(" ")}`),i===null)throw Se;{let y=null;try{y=i.FS[h](...m)}catch{throw Error(h==="readdir"?`ffmpeg.FS('readdir', '${m[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:h==="readFile"?`ffmpeg.FS('readFile', '${m[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return y}},P=()=>{if(i===null)throw Se;v=!1,i.exit(1),i=null,a=null,f=null},E=h=>{$=h},_=h=>{Ge(h)};return Re(n),Ge(t),J("info",`use ffmpeg.wasm v${an}`),{setProgress:E,setLogger:_,setLogging:Re,load:F,isLoaded:I,run:Y,exit:P,FS:U}};const cn=fn,{fetchFile:un}=Qe;var Xe={createFFmpeg:cn,fetchFile:un};const De=V("<video controls></video>"),dn=V("<p>Took <!> seconds.</p>"),hn=V('<a><button type="button">Download</button></a>'),pn=V('<div><section><h2>Input</h2><input type="file" accept="video/mp4,video/*"><p>Start time: </p><p>End time: </p><button type="button">Set start</button><button type="button">Set end</button><button type="button">Trim</button></section><section><h2>Output</h2></section></div>'),gn=V("<div><main><p>This SolidJS + FFmpeg.wasm app lets you trim videos in-browser.</p><p>The output is the trimmed video, re-encoded to h264/aac as to avoid video/audio desync. Therefore, it's very slow but produces a good result nonetheless.</p></main></div>"),mn=V("<h2>Loading FFmpeg...</h2>"),vn=V("<p>Your video will appear here.</p>"),ie=Xe.createFFmpeg({log:!0}),wn=()=>{const[e,n]=X(!1),[t,r]=X(null),[o,i]=X(null),[a,f]=X(0),[v,$]=X(0),[g,N]=X(0);let F;const I=async(U,P)=>{i(null);const E=Date.now();ie.FS("writeFile","in.mp4",await Xe.fetchFile(t())),await ie.run("-i","in.mp4","-ss",`${U}`,"-to",`${P}`,"-c:v","libx264","-c:a","aac","out.mp4");const _=Date.now();N(_-E);const h=ie.FS("readFile","out.mp4"),m=URL.createObjectURL(new Blob([h.buffer],{type:"video/mp4"}));i(m)},Y=async()=>{ie.isLoaded()||(await ie.load(),n(!0))};return ot(async()=>{Y()}),(()=>{const U=gn.cloneNode(!0),P=U.firstChild;return P.firstChild.nextSibling,q(U,se(mt,{}),P),q(P,se(be,{get when(){return e()},get fallback(){return mn.cloneNode(!0)},get children(){const _=pn.cloneNode(!0),h=_.firstChild,m=h.firstChild,y=m.nextSibling,j=y.nextSibling;j.firstChild;const S=j.nextSibling;S.firstChild;const R=S.nextSibling,ee=R.nextSibling,Q=ee.nextSibling,te=h.nextSibling;return te.firstChild,q(h,se(be,{get when(){return t()},get children(){const p=De.cloneNode(!0);p.addEventListener("loadedmetadata",A=>{$(A.currentTarget.duration)});const C=F;return typeof C=="function"?C(p):F=p,W(()=>de(p,"src",URL.createObjectURL(t()))),p}}),y),y.addEventListener("change",p=>{r(p.currentTarget.files?.item(0)??null),i(null)}),q(j,a,null),q(S,v,null),R.$$click=()=>f(F?.currentTime??0),ee.$$click=()=>$(F?.currentTime??0),Q.$$click=()=>I(a(),v()),q(te,se(be,{get when(){return o()},get fallback(){return vn.cloneNode(!0)},get children(){return[(()=>{const p=De.cloneNode(!0);return W(()=>de(p,"src",o()??void 0)),p})(),(()=>{const p=dn.cloneNode(!0),C=p.firstChild,A=C.nextSibling;return A.nextSibling,q(p,()=>g()/1e3,A),p})(),(()=>{const p=hn.cloneNode(!0);return W(C=>{const A=o()??"#",M=t().name+"-trimmed.mp4";return A!==C._v$&&de(p,"href",C._v$=A),M!==C._v$2&&de(p,"download",C._v$2=M),C},{_v$:void 0,_v$2:void 0}),p})()]}}),null),W(p=>{const C=re.container,A=re.containerChild,M=re.containerChild;return C!==p._v$3&&(_.className=p._v$3=C),A!==p._v$4&&(h.className=p._v$4=A),M!==p._v$5&&(te.className=p._v$5=M),p},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),_}}),null),W(_=>{const h=re.App,m=re.AppContent;return h!==_._v$6&&(U.className=_._v$6=h),m!==_._v$7&&(P.className=_._v$7=m),_},{_v$6:void 0,_v$7:void 0}),U})()};ct(["click"]);ft(()=>se(wn,{}),document.getElementById("root"));
